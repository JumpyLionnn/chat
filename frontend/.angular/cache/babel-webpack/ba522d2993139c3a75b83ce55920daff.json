{"ast":null,"code":"import _asyncToGenerator from \"D:\\\\projects\\\\chat\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { Message } from './chatmessage/message.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"./chatmessage/chatmessage.component\";\nimport * as i4 from \"./alert/alert.component\";\n\nfunction ChatboxComponent_app_chatmessage_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-chatmessage\", 11);\n    i0.ɵɵlistener(\"replyClick\", function ChatboxComponent_app_chatmessage_3_Template_app_chatmessage_replyClick_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.onReplyClick($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const message_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"message\", message_r2);\n  }\n}\n\nfunction ChatboxComponent_app_alert_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-alert\", 12);\n    i0.ɵɵlistener(\"close\", function ChatboxComponent_app_alert_5_Template_app_alert_close_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const i_r6 = restoredCtx.index;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.onAlertClose(i_r6);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const alert_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"type\", alert_r5.type);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(alert_r5.content);\n  }\n}\n\nexport class ChatboxComponent {\n  constructor() {\n    this.allowSendingMessages = true;\n    this.messageInputContent = \"\";\n    this.nameInputContent = \"\";\n    this.messages = [];\n    this.alerts = [];\n  }\n\n  ngOnInit() {}\n\n  onSendMessage() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const content = _this.messageInputContent.trim();\n\n      const username = _this.nameInputContent.trim();\n\n      if (content === \"\") {\n        _this.addAlert(\"error\", \"You can not send an empty message.\");\n\n        return;\n      }\n\n      if (username === \"\") {\n        _this.addAlert(\"error\", \"You dont have a name.\");\n\n        return;\n      }\n\n      const today = new Date();\n      const hours = today.getHours();\n      const minutes = today.getMinutes();\n      const time = (hours > 12 ? hours - 12 : hours) + \":\" + (minutes < 10 ? \"0\" + minutes : minutes) + (hours > 11 ? \" PM\" : \" AM\");\n\n      _this.messages.push(new Message(username, content, time));\n\n      _this.messageInputContent = \"\";\n    })();\n  }\n\n  addAlert(type, content, time = 5000) {\n    const alert = this.alerts[this.alerts.push({\n      type: type,\n      content: content\n    })];\n    setTimeout(() => {\n      this.alerts.splice(this.alerts.indexOf(alert), 1);\n    }, time);\n  }\n\n  onInputKeyDown(event) {\n    if (event.key === \"Enter\" && !event.repeat) {\n      this.onSendMessage();\n    }\n  }\n\n  onReplyClick(event) {\n    this.messageInputContent = `@${event.username} `;\n  }\n\n  onAlertClose(index) {\n    this.alerts.splice(index, 1);\n  }\n\n}\n\nChatboxComponent.ɵfac = function ChatboxComponent_Factory(t) {\n  return new (t || ChatboxComponent)();\n};\n\nChatboxComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ChatboxComponent,\n  selectors: [[\"app-chatbox\"]],\n  decls: 12,\n  vars: 6,\n  consts: [[1, \"container\", \"d-flex\", \"flex-column\", \"h-100\"], [1, \"row\", \"flex-grow-1\"], [1, \"col-xs-12\", \"position-relative\", \"overflow-auto\", \"h-100\"], [3, \"message\", \"replyClick\", 4, \"ngFor\", \"ngForOf\"], [1, \"position-absolute\", \"bottom-0\", \"w-100\"], [3, \"type\", \"close\", 4, \"ngFor\", \"ngForOf\"], [1, \"row\"], [1, \"input-group\", \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"Type a message...\", \"aria-label\", \"Type a message...\", \"aria-describedby\", \"button-addon2\", 1, \"form-control\", 3, \"disabled\", \"ngModel\", \"ngModelChange\", \"keydown\"], [\"type\", \"button\", \"id\", \"button-addon2\", 1, \"btn\", \"btn-outline-secondary\", 3, \"disabled\", \"click\"], [\"type\", \"text\", \"placeholder\", \"Write your name...\", \"aria-label\", \"Write your name...\", \"aria-describedby\", \"button-addon2\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"message\", \"replyClick\"], [3, \"type\", \"close\"]],\n  template: function ChatboxComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵtemplate(3, ChatboxComponent_app_chatmessage_3_Template, 1, 1, \"app-chatmessage\", 3);\n      i0.ɵɵelementStart(4, \"div\", 4);\n      i0.ɵɵtemplate(5, ChatboxComponent_app_alert_5_Template, 2, 2, \"app-alert\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 6);\n      i0.ɵɵelementStart(7, \"div\", 7);\n      i0.ɵɵelementStart(8, \"input\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function ChatboxComponent_Template_input_ngModelChange_8_listener($event) {\n        return ctx.messageInputContent = $event;\n      })(\"keydown\", function ChatboxComponent_Template_input_keydown_8_listener($event) {\n        return ctx.onInputKeyDown($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"button\", 9);\n      i0.ɵɵlistener(\"click\", function ChatboxComponent_Template_button_click_9_listener() {\n        return ctx.onSendMessage();\n      });\n      i0.ɵɵtext(10, \"Send\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"input\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function ChatboxComponent_Template_input_ngModelChange_11_listener($event) {\n        return ctx.nameInputContent = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.messages);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.alerts);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", !ctx.allowSendingMessages)(\"ngModel\", ctx.messageInputContent);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", !ctx.allowSendingMessages);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.nameInputContent);\n    }\n  },\n  directives: [i1.NgForOf, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i3.ChatmessageComponent, i4.AlertComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjaGF0Ym94LmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"sources":["D:/projects/chat/src/app/chatbox/chatbox.component.ts"],"names":["Message","i0","i1","i2","i3","i4","ChatboxComponent_app_chatmessage_3_Template","rf","ctx","_r4","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","ChatboxComponent_app_chatmessage_3_Template_app_chatmessage_replyClick_0_listener","$event","ɵɵrestoreView","ctx_r3","ɵɵnextContext","onReplyClick","ɵɵelementEnd","message_r2","$implicit","ɵɵproperty","ChatboxComponent_app_alert_5_Template","_r8","ChatboxComponent_app_alert_5_Template_app_alert_close_0_listener","restoredCtx","i_r6","index","ctx_r7","onAlertClose","ɵɵtext","alert_r5","type","ɵɵadvance","ɵɵtextInterpolate","content","ChatboxComponent","constructor","allowSendingMessages","messageInputContent","nameInputContent","messages","alerts","ngOnInit","onSendMessage","trim","username","addAlert","today","Date","hours","getHours","minutes","getMinutes","time","push","alert","setTimeout","splice","indexOf","onInputKeyDown","event","key","repeat","ɵfac","ChatboxComponent_Factory","t","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","consts","template","ChatboxComponent_Template","ɵɵtemplate","ChatboxComponent_Template_input_ngModelChange_8_listener","ChatboxComponent_Template_input_keydown_8_listener","ChatboxComponent_Template_button_click_9_listener","ChatboxComponent_Template_input_ngModelChange_11_listener","directives","NgForOf","DefaultValueAccessor","NgControlStatus","NgModel","ChatmessageComponent","AlertComponent","styles"],"mappings":"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","sourcesContent":["import { Message } from './chatmessage/message.model';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/common\";\r\nimport * as i2 from \"@angular/forms\";\r\nimport * as i3 from \"./chatmessage/chatmessage.component\";\r\nimport * as i4 from \"./alert/alert.component\";\r\nfunction ChatboxComponent_app_chatmessage_3_Template(rf, ctx) { if (rf & 1) {\r\n    const _r4 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"app-chatmessage\", 11);\r\n    i0.ɵɵlistener(\"replyClick\", function ChatboxComponent_app_chatmessage_3_Template_app_chatmessage_replyClick_0_listener($event) { i0.ɵɵrestoreView(_r4); const ctx_r3 = i0.ɵɵnextContext(); return ctx_r3.onReplyClick($event); });\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const message_r2 = ctx.$implicit;\r\n    i0.ɵɵproperty(\"message\", message_r2);\r\n} }\r\nfunction ChatboxComponent_app_alert_5_Template(rf, ctx) { if (rf & 1) {\r\n    const _r8 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"app-alert\", 12);\r\n    i0.ɵɵlistener(\"close\", function ChatboxComponent_app_alert_5_Template_app_alert_close_0_listener() { const restoredCtx = i0.ɵɵrestoreView(_r8); const i_r6 = restoredCtx.index; const ctx_r7 = i0.ɵɵnextContext(); return ctx_r7.onAlertClose(i_r6); });\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const alert_r5 = ctx.$implicit;\r\n    i0.ɵɵproperty(\"type\", alert_r5.type);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate(alert_r5.content);\r\n} }\r\nexport class ChatboxComponent {\r\n    constructor() {\r\n        this.allowSendingMessages = true;\r\n        this.messageInputContent = \"\";\r\n        this.nameInputContent = \"\";\r\n        this.messages = [];\r\n        this.alerts = [];\r\n    }\r\n    ngOnInit() {\r\n    }\r\n    async onSendMessage() {\r\n        const content = this.messageInputContent.trim();\r\n        const username = this.nameInputContent.trim();\r\n        if (content === \"\") {\r\n            this.addAlert(\"error\", \"You can not send an empty message.\");\r\n            return;\r\n        }\r\n        if (username === \"\") {\r\n            this.addAlert(\"error\", \"You dont have a name.\");\r\n            return;\r\n        }\r\n        const today = new Date();\r\n        const hours = today.getHours();\r\n        const minutes = today.getMinutes();\r\n        const time = (hours > 12 ? hours - 12 : hours) + \":\" + (minutes < 10 ? \"0\" + minutes : minutes) + (hours > 11 ? \" PM\" : \" AM\");\r\n        this.messages.push(new Message(username, content, time));\r\n        this.messageInputContent = \"\";\r\n    }\r\n    addAlert(type, content, time = 5000) {\r\n        const alert = this.alerts[this.alerts.push({\r\n            type: type,\r\n            content: content\r\n        })];\r\n        setTimeout(() => {\r\n            this.alerts.splice(this.alerts.indexOf(alert), 1);\r\n        }, time);\r\n    }\r\n    onInputKeyDown(event) {\r\n        if (event.key === \"Enter\" && !event.repeat) {\r\n            this.onSendMessage();\r\n        }\r\n    }\r\n    onReplyClick(event) {\r\n        this.messageInputContent = `@${event.username} `;\r\n    }\r\n    onAlertClose(index) {\r\n        this.alerts.splice(index, 1);\r\n    }\r\n}\r\nChatboxComponent.ɵfac = function ChatboxComponent_Factory(t) { return new (t || ChatboxComponent)(); };\r\nChatboxComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: ChatboxComponent, selectors: [[\"app-chatbox\"]], decls: 12, vars: 6, consts: [[1, \"container\", \"d-flex\", \"flex-column\", \"h-100\"], [1, \"row\", \"flex-grow-1\"], [1, \"col-xs-12\", \"position-relative\", \"overflow-auto\", \"h-100\"], [3, \"message\", \"replyClick\", 4, \"ngFor\", \"ngForOf\"], [1, \"position-absolute\", \"bottom-0\", \"w-100\"], [3, \"type\", \"close\", 4, \"ngFor\", \"ngForOf\"], [1, \"row\"], [1, \"input-group\", \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"Type a message...\", \"aria-label\", \"Type a message...\", \"aria-describedby\", \"button-addon2\", 1, \"form-control\", 3, \"disabled\", \"ngModel\", \"ngModelChange\", \"keydown\"], [\"type\", \"button\", \"id\", \"button-addon2\", 1, \"btn\", \"btn-outline-secondary\", 3, \"disabled\", \"click\"], [\"type\", \"text\", \"placeholder\", \"Write your name...\", \"aria-label\", \"Write your name...\", \"aria-describedby\", \"button-addon2\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"message\", \"replyClick\"], [3, \"type\", \"close\"]], template: function ChatboxComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"div\", 1);\r\n        i0.ɵɵelementStart(2, \"div\", 2);\r\n        i0.ɵɵtemplate(3, ChatboxComponent_app_chatmessage_3_Template, 1, 1, \"app-chatmessage\", 3);\r\n        i0.ɵɵelementStart(4, \"div\", 4);\r\n        i0.ɵɵtemplate(5, ChatboxComponent_app_alert_5_Template, 2, 2, \"app-alert\", 5);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(6, \"div\", 6);\r\n        i0.ɵɵelementStart(7, \"div\", 7);\r\n        i0.ɵɵelementStart(8, \"input\", 8);\r\n        i0.ɵɵlistener(\"ngModelChange\", function ChatboxComponent_Template_input_ngModelChange_8_listener($event) { return ctx.messageInputContent = $event; })(\"keydown\", function ChatboxComponent_Template_input_keydown_8_listener($event) { return ctx.onInputKeyDown($event); });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(9, \"button\", 9);\r\n        i0.ɵɵlistener(\"click\", function ChatboxComponent_Template_button_click_9_listener() { return ctx.onSendMessage(); });\r\n        i0.ɵɵtext(10, \"Send\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(11, \"input\", 10);\r\n        i0.ɵɵlistener(\"ngModelChange\", function ChatboxComponent_Template_input_ngModelChange_11_listener($event) { return ctx.nameInputContent = $event; });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.messages);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.alerts);\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"disabled\", !ctx.allowSendingMessages)(\"ngModel\", ctx.messageInputContent);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"disabled\", !ctx.allowSendingMessages);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngModel\", ctx.nameInputContent);\r\n    } }, directives: [i1.NgForOf, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i3.ChatmessageComponent, i4.AlertComponent], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjaGF0Ym94LmNvbXBvbmVudC5jc3MifQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}