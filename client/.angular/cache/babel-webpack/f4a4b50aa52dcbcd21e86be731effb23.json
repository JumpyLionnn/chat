{"ast":null,"code":"import _asyncToGenerator from \"D:\\\\projects\\\\chat\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { Message } from '../chatmessage/message.model';\nimport { database, doc, onSnapshot } from '../firebase';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../chatmessage/chatmessage.component\";\n\nfunction ChatboxComponent_app_chatmessage_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-chatmessage\", 7);\n  }\n\n  if (rf & 2) {\n    const message_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"message\", message_r1);\n  }\n}\n\nexport class ChatboxComponent {\n  constructor() {\n    this.allowSendingMessages = true;\n    this.messageInputContent = \"\";\n    this.messages = [];\n    onSnapshot(doc(database, \"messages\", \"latest-message\"), doc => {\n      const data = doc.data();\n      const today = new Date();\n      const hours = today.getHours();\n      const minutes = today.getMinutes();\n      const time = (hours > 12 ? hours - 12 : hours) + \":\" + (minutes < 10 ? \"0\" + minutes : minutes) + (hours > 11 ? \" PM\" : \" AM\");\n      this.messages.push(new Message(data.username, false, data.content, time));\n    });\n  }\n\n  ngOnInit() {}\n\n  onSendMessage() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.messageInputContent === \"disable\") {\n        _this.allowSendingMessages = false;\n      }\n\n      const today = new Date();\n      const hours = today.getHours();\n      const minutes = today.getMinutes();\n      const time = (hours > 12 ? hours - 12 : hours) + \":\" + (minutes < 10 ? \"0\" + minutes : minutes) + (hours > 11 ? \" PM\" : \" AM\");\n\n      _this.messages.push(new Message(\"username\", false, _this.messageInputContent, time));\n    })();\n  }\n\n  onInputKeyDown(event) {\n    if (event.key === \"Enter\" && !event.repeat) {\n      this.onSendMessage();\n    }\n  }\n\n}\n\nChatboxComponent.ɵfac = function ChatboxComponent_Factory(t) {\n  return new (t || ChatboxComponent)();\n};\n\nChatboxComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ChatboxComponent,\n  selectors: [[\"app-chatbox\"]],\n  decls: 9,\n  vars: 4,\n  consts: [[1, \"container\"], [1, \"row\"], [1, \"col-xs-12\"], [3, \"message\", 4, \"ngFor\", \"ngForOf\"], [1, \"input-group\", \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"Type a message...\", \"aria-label\", \"Type a message...\", \"aria-describedby\", \"button-addon2\", 1, \"form-control\", 3, \"disabled\", \"ngModel\", \"ngModelChange\", \"keydown\"], [\"type\", \"button\", \"id\", \"button-addon2\", 1, \"btn\", \"btn-outline-secondary\", 3, \"disabled\", \"click\"], [3, \"message\"]],\n  template: function ChatboxComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵtemplate(3, ChatboxComponent_app_chatmessage_3_Template, 1, 1, \"app-chatmessage\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 1);\n      i0.ɵɵelementStart(5, \"div\", 4);\n      i0.ɵɵelementStart(6, \"input\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function ChatboxComponent_Template_input_ngModelChange_6_listener($event) {\n        return ctx.messageInputContent = $event;\n      })(\"keydown\", function ChatboxComponent_Template_input_keydown_6_listener($event) {\n        return ctx.onInputKeyDown($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"button\", 6);\n      i0.ɵɵlistener(\"click\", function ChatboxComponent_Template_button_click_7_listener() {\n        return ctx.onSendMessage();\n      });\n      i0.ɵɵtext(8, \"Send\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.messages);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", !ctx.allowSendingMessages)(\"ngModel\", ctx.messageInputContent);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", !ctx.allowSendingMessages);\n    }\n  },\n  directives: [i1.NgForOf, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i3.ChatmessageComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjaGF0Ym94LmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"sources":["D:/projects/chat/src/app/chatbox/chatbox.component.ts"],"names":["Message","database","doc","onSnapshot","i0","i1","i2","i3","ChatboxComponent_app_chatmessage_3_Template","rf","ctx","ɵɵelement","message_r1","$implicit","ɵɵproperty","ChatboxComponent","constructor","allowSendingMessages","messageInputContent","messages","data","today","Date","hours","getHours","minutes","getMinutes","time","push","username","content","ngOnInit","onSendMessage","onInputKeyDown","event","key","repeat","ɵfac","ChatboxComponent_Factory","t","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","ChatboxComponent_Template","ɵɵelementStart","ɵɵtemplate","ɵɵelementEnd","ɵɵlistener","ChatboxComponent_Template_input_ngModelChange_6_listener","$event","ChatboxComponent_Template_input_keydown_6_listener","ChatboxComponent_Template_button_click_7_listener","ɵɵtext","ɵɵadvance","directives","NgForOf","DefaultValueAccessor","NgControlStatus","NgModel","ChatmessageComponent","styles"],"mappings":"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","sourcesContent":["import { Message } from '../chatmessage/message.model';\r\nimport { database, doc, onSnapshot } from '../firebase';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/common\";\r\nimport * as i2 from \"@angular/forms\";\r\nimport * as i3 from \"../chatmessage/chatmessage.component\";\r\nfunction ChatboxComponent_app_chatmessage_3_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelement(0, \"app-chatmessage\", 7);\r\n} if (rf & 2) {\r\n    const message_r1 = ctx.$implicit;\r\n    i0.ɵɵproperty(\"message\", message_r1);\r\n} }\r\nexport class ChatboxComponent {\r\n    constructor() {\r\n        this.allowSendingMessages = true;\r\n        this.messageInputContent = \"\";\r\n        this.messages = [];\r\n        onSnapshot(doc(database, \"messages\", \"latest-message\"), (doc) => {\r\n            const data = doc.data();\r\n            const today = new Date();\r\n            const hours = today.getHours();\r\n            const minutes = today.getMinutes();\r\n            const time = (hours > 12 ? hours - 12 : hours) + \":\" + (minutes < 10 ? \"0\" + minutes : minutes) + (hours > 11 ? \" PM\" : \" AM\");\r\n            this.messages.push(new Message(data.username, false, data.content, time));\r\n        });\r\n    }\r\n    ngOnInit() {\r\n    }\r\n    async onSendMessage() {\r\n        if (this.messageInputContent === \"disable\") {\r\n            this.allowSendingMessages = false;\r\n        }\r\n        const today = new Date();\r\n        const hours = today.getHours();\r\n        const minutes = today.getMinutes();\r\n        const time = (hours > 12 ? hours - 12 : hours) + \":\" + (minutes < 10 ? \"0\" + minutes : minutes) + (hours > 11 ? \" PM\" : \" AM\");\r\n        this.messages.push(new Message(\"username\", false, this.messageInputContent, time));\r\n    }\r\n    onInputKeyDown(event) {\r\n        if (event.key === \"Enter\" && !event.repeat) {\r\n            this.onSendMessage();\r\n        }\r\n    }\r\n}\r\nChatboxComponent.ɵfac = function ChatboxComponent_Factory(t) { return new (t || ChatboxComponent)(); };\r\nChatboxComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: ChatboxComponent, selectors: [[\"app-chatbox\"]], decls: 9, vars: 4, consts: [[1, \"container\"], [1, \"row\"], [1, \"col-xs-12\"], [3, \"message\", 4, \"ngFor\", \"ngForOf\"], [1, \"input-group\", \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"Type a message...\", \"aria-label\", \"Type a message...\", \"aria-describedby\", \"button-addon2\", 1, \"form-control\", 3, \"disabled\", \"ngModel\", \"ngModelChange\", \"keydown\"], [\"type\", \"button\", \"id\", \"button-addon2\", 1, \"btn\", \"btn-outline-secondary\", 3, \"disabled\", \"click\"], [3, \"message\"]], template: function ChatboxComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"div\", 1);\r\n        i0.ɵɵelementStart(2, \"div\", 2);\r\n        i0.ɵɵtemplate(3, ChatboxComponent_app_chatmessage_3_Template, 1, 1, \"app-chatmessage\", 3);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(4, \"div\", 1);\r\n        i0.ɵɵelementStart(5, \"div\", 4);\r\n        i0.ɵɵelementStart(6, \"input\", 5);\r\n        i0.ɵɵlistener(\"ngModelChange\", function ChatboxComponent_Template_input_ngModelChange_6_listener($event) { return ctx.messageInputContent = $event; })(\"keydown\", function ChatboxComponent_Template_input_keydown_6_listener($event) { return ctx.onInputKeyDown($event); });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(7, \"button\", 6);\r\n        i0.ɵɵlistener(\"click\", function ChatboxComponent_Template_button_click_7_listener() { return ctx.onSendMessage(); });\r\n        i0.ɵɵtext(8, \"Send\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.messages);\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"disabled\", !ctx.allowSendingMessages)(\"ngModel\", ctx.messageInputContent);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"disabled\", !ctx.allowSendingMessages);\r\n    } }, directives: [i1.NgForOf, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i3.ChatmessageComponent], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjaGF0Ym94LmNvbXBvbmVudC5jc3MifQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}