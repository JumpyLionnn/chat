{"ast":null,"code":"import _asyncToGenerator from \"D:\\\\projects\\\\chat\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { Message } from './chatmessage/message.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"./chatmessage/chatmessage.component\";\nimport * as i4 from \"./alert/alert.component\";\nconst _c0 = [\"messagesContainer\"];\n\nfunction ChatboxComponent_app_chatmessage_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-chatmessage\", 14);\n    i0.ɵɵlistener(\"replyClick\", function ChatboxComponent_app_chatmessage_4_Template_app_chatmessage_replyClick_0_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.onReplyClick($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const message_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"message\", message_r4);\n  }\n}\n\nfunction ChatboxComponent_app_alert_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-alert\", 15);\n    i0.ɵɵlistener(\"close\", function ChatboxComponent_app_alert_6_Template_app_alert_close_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const i_r8 = restoredCtx.index;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.onAlertClose(i_r8);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const alert_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"type\", alert_r7.type);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(alert_r7.content);\n  }\n}\n\nconst _c1 = function (a0) {\n  return {\n    shrink: a0\n  };\n};\n\nfunction ChatboxComponent_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function ChatboxComponent_button_7_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.scrollDown();\n    });\n    i0.ɵɵelement(1, \"i\", 17);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(1, _c1, ctx_r3.shrinkScrollDownButton));\n  }\n}\n\nexport class ChatboxComponent {\n  constructor() {\n    this.allowSendingMessages = false;\n    this.showScrollDownButton = false;\n    this.shrinkScrollDownButton = false;\n    this.messageSent = false;\n    this.messageContentInput = \"\";\n    this.nameInputContent = \"\";\n    this.messages = [];\n    this.alerts = [];\n  }\n\n  ngOnInit() {}\n\n  ngAfterViewChecked() {\n    if (this.messageSent) {\n      this.adjustScroll();\n      this.messageSent = false;\n    }\n  }\n\n  onSendMessage() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      // making sure the message data is valid\n      const content = _this.messageContentInput.trim();\n\n      const username = _this.nameInputContent.trim();\n\n      if (content === \"\") {\n        _this.addAlert(\"error\", \"You can not send an empty message.\");\n\n        return;\n      }\n\n      if (username === \"\") {\n        _this.addAlert(\"error\", \"You dont have a name.\");\n\n        return;\n      } //calculating the date string\n\n\n      const today = new Date();\n      const hours = today.getHours();\n      const minutes = today.getMinutes();\n      const time = (hours > 12 ? hours - 12 : hours) + \":\" + (minutes < 10 ? \"0\" + minutes : minutes) + (hours > 11 ? \" PM\" : \" AM\"); //adding the message to the list\n\n      _this.messages.push(new Message(username, content, time)); //reseting the input\n\n\n      _this.messageContentInput = \"\";\n      _this.allowSendingMessages = false;\n      _this.messageSent = true;\n    })();\n  }\n\n  onMessageContentInputChange(event) {\n    this.messageContentInput = event.target.value;\n\n    if (this.messageContentInput.trim() === \"\") {\n      this.allowSendingMessages = false;\n    } else {\n      this.allowSendingMessages = true;\n    }\n  }\n\n  onInputKeyDown(event) {\n    if (event.key === \"Enter\" && !event.repeat) {\n      this.onSendMessage();\n    }\n  }\n\n  adjustScroll() {\n    const messagesContainer = this.messagesContainerRef.nativeElement;\n\n    if (messagesContainer.scrollTop + messagesContainer.clientHeight >= messagesContainer.scrollHeight - 250) {\n      messagesContainer.scrollTop = messagesContainer.scrollHeight;\n    }\n  }\n\n  scrollDown() {\n    this.messagesContainerRef.nativeElement.scrollTo({\n      top: this.messagesContainerRef.nativeElement.scrollHeight,\n      behavior: \"smooth\"\n    });\n  }\n\n  checkScrollDownButton() {\n    const messagesContainer = this.messagesContainerRef.nativeElement;\n    const result = messagesContainer.scrollTop + messagesContainer.clientHeight < messagesContainer.scrollHeight - 250;\n    console.log(result);\n\n    if (result) {\n      this.showScrollDownButton = true;\n      this.shrinkScrollDownButton = false;\n    } else if (!this.shrinkScrollDownButton && this.showScrollDownButton !== result) {\n      this.shrinkScrollDownButton = true;\n      setTimeout(() => {\n        this.showScrollDownButton = messagesContainer.scrollTop + messagesContainer.clientHeight < messagesContainer.scrollHeight - 250;\n        this.shrinkScrollDownButton = false;\n      }, 3000);\n    }\n  }\n\n  onReplyClick(event) {\n    this.messageContentInput = `@${event.username} `;\n  }\n\n  addAlert(type, content, time = 5000) {\n    const alert = this.alerts[this.alerts.push({\n      type: type,\n      content: content\n    })];\n    setTimeout(() => {\n      this.alerts.splice(this.alerts.indexOf(alert), 1);\n    }, time);\n  }\n\n  onAlertClose(index) {\n    this.alerts.splice(index, 1);\n  }\n\n}\n\nChatboxComponent.ɵfac = function ChatboxComponent_Factory(t) {\n  return new (t || ChatboxComponent)();\n};\n\nChatboxComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ChatboxComponent,\n  selectors: [[\"app-chatbox\"]],\n  viewQuery: function ChatboxComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.messagesContainerRef = _t.first);\n    }\n  },\n  decls: 14,\n  vars: 6,\n  consts: [[1, \"container\", \"h-100\", \"d-flex\", \"flex-column\"], [1, \"row\", \"position-relative\", \"flex-grow-1\", \"flex-basis-0\"], [1, \"col-xs-12\", \"h-100\", \"overflow-y-auto\", \"scroller\", 3, \"scroll\"], [\"messagesContainer\", \"\"], [3, \"message\", \"replyClick\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-xs-12\", \"position-absolute\", \"bottom-0\", \"w-100\", \"d-flex\", \"flex-column\", \"align-items-center\"], [3, \"type\", \"close\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"scroll-down btn btn-outline-secondary w-auto rounded-circle border-3\", 3, \"ngClass\", \"click\", 4, \"ngIf\"], [1, \"row\", \"mb-3\"], [1, \"input-group\", \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"Type a message...\", \"aria-label\", \"Type a message...\", \"aria-describedby\", \"button-addon2\", 1, \"form-control\", 3, \"value\", \"keydown\", \"input\"], [\"type\", \"button\", \"id\", \"button-addon2\", 1, \"btn\", \"btn-outline-secondary\", \"px-1\", \"py-0\", 3, \"disabled\", \"click\"], [1, \"bi-arrow-right-circle-fill\", \"fs-4\"], [\"type\", \"text\", \"placeholder\", \"Write your name...\", \"aria-label\", \"Write your name...\", \"aria-describedby\", \"button-addon2\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"message\", \"replyClick\"], [3, \"type\", \"close\"], [1, \"scroll-down\", \"btn\", \"btn-outline-secondary\", \"w-auto\", \"rounded-circle\", \"border-3\", 3, \"ngClass\", \"click\"], [1, \"bi-chevron-double-down\", \"fs-5\"]],\n  template: function ChatboxComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2, 3);\n      i0.ɵɵlistener(\"scroll\", function ChatboxComponent_Template_div_scroll_2_listener() {\n        return ctx.checkScrollDownButton();\n      });\n      i0.ɵɵtemplate(4, ChatboxComponent_app_chatmessage_4_Template, 1, 1, \"app-chatmessage\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\", 5);\n      i0.ɵɵtemplate(6, ChatboxComponent_app_alert_6_Template, 2, 2, \"app-alert\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(7, ChatboxComponent_button_7_Template, 2, 3, \"button\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 8);\n      i0.ɵɵelementStart(9, \"div\", 9);\n      i0.ɵɵelementStart(10, \"input\", 10);\n      i0.ɵɵlistener(\"keydown\", function ChatboxComponent_Template_input_keydown_10_listener($event) {\n        return ctx.onInputKeyDown($event);\n      })(\"input\", function ChatboxComponent_Template_input_input_10_listener($event) {\n        return ctx.onMessageContentInputChange($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"button\", 11);\n      i0.ɵɵlistener(\"click\", function ChatboxComponent_Template_button_click_11_listener() {\n        return ctx.onSendMessage();\n      });\n      i0.ɵɵelement(12, \"i\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"input\", 13);\n      i0.ɵɵlistener(\"ngModelChange\", function ChatboxComponent_Template_input_ngModelChange_13_listener($event) {\n        return ctx.nameInputContent = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.messages);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.alerts);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showScrollDownButton);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"value\", ctx.messageContentInput);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", !ctx.allowSendingMessages);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.nameInputContent);\n    }\n  },\n  directives: [i1.NgForOf, i1.NgIf, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i3.ChatmessageComponent, i4.AlertComponent, i1.NgClass],\n  styles: [\"button[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus {\\r\\n    box-shadow: none;\\r\\n}\\r\\n\\r\\n.overflow-y-auto[_ngcontent-%COMP%] {\\r\\n    overflow-y: auto;\\r\\n}\\r\\n\\r\\n.flex-basis-0[_ngcontent-%COMP%] {\\r\\n    flex-basis: 0;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n.scroller[_ngcontent-%COMP%] {\\r\\n    scrollbar-color: #6c757d #f1f1f1;\\r\\n    scrollbar-width: thin;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n[_ngcontent-%COMP%]::-webkit-scrollbar {\\r\\n    width: 8px;\\r\\n}\\r\\n\\r\\n[_ngcontent-%COMP%]::-webkit-scrollbar-track {\\r\\n    background: #f1f1f1;\\r\\n}\\r\\n\\r\\n[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\\r\\n    background: #6c757d;\\r\\n}\\r\\n\\r\\n[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\\r\\n    background: #555;\\r\\n}\\r\\n\\r\\n.scroll-down[_ngcontent-%COMP%] {\\r\\n    padding: 0.225rem 0.6rem;\\r\\n    position: absolute;\\r\\n    bottom: 1.5rem;\\r\\n    left: 1.5rem;\\r\\n    animation: grow .25s linear;\\r\\n}\\r\\n\\r\\n.shrink[_ngcontent-%COMP%] {\\r\\n    transform: scale(0);\\r\\n    animation: shrink .25s linear;\\r\\n}\\r\\n\\r\\n.scroll-down[_ngcontent-%COMP%]:not(:hover) {\\r\\n    background-color: #fff;\\r\\n}\\r\\n\\r\\n@keyframes grow {\\r\\n    from {\\r\\n        transform: scale(0);\\r\\n    }\\r\\n    to {\\r\\n        transform: scale(1);\\r\\n    }\\r\\n}\\r\\n\\r\\n@keyframes shrink {\\r\\n    from {\\r\\n        transform: scale(1);\\r\\n    }\\r\\n    to {\\r\\n        transform: scale(0);\\r\\n    }\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXRib3guY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7SUFFSSxnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSxnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSxhQUFhO0FBQ2pCOztBQUdBLFlBQVk7O0FBRVo7SUFDSSxnQ0FBZ0M7SUFDaEMscUJBQXFCO0FBQ3pCOztBQUdBLG9CQUFvQjs7QUFFcEI7SUFDSSxVQUFVO0FBQ2Q7O0FBRUM7SUFDRyxtQkFBbUI7QUFDdkI7O0FBRUM7SUFDRyxtQkFBbUI7QUFDdkI7O0FBRUM7SUFDRyxnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSx3QkFBd0I7SUFDeEIsa0JBQWtCO0lBQ2xCLGNBQWM7SUFDZCxZQUFZO0lBQ1osMkJBQTJCO0FBQy9COztBQUVBO0lBQ0ksbUJBQW1CO0lBQ25CLDZCQUE2QjtBQUNqQzs7QUFFQTtJQUNJLHNCQUFzQjtBQUMxQjs7QUFFQTtJQUNJO1FBQ0ksbUJBQW1CO0lBQ3ZCO0lBQ0E7UUFDSSxtQkFBbUI7SUFDdkI7QUFDSjs7QUFFQTtJQUNJO1FBQ0ksbUJBQW1CO0lBQ3ZCO0lBQ0E7UUFDSSxtQkFBbUI7SUFDdkI7QUFDSiIsImZpbGUiOiJjaGF0Ym94LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJidXR0b246Zm9jdXMsXHJcbmlucHV0OmZvY3VzIHtcclxuICAgIGJveC1zaGFkb3c6IG5vbmU7XHJcbn1cclxuXHJcbi5vdmVyZmxvdy15LWF1dG8ge1xyXG4gICAgb3ZlcmZsb3cteTogYXV0bztcclxufVxyXG5cclxuLmZsZXgtYmFzaXMtMCB7XHJcbiAgICBmbGV4LWJhc2lzOiAwO1xyXG59XHJcblxyXG5cclxuLyogRmlyZWZveCAqL1xyXG5cclxuLnNjcm9sbGVyIHtcclxuICAgIHNjcm9sbGJhci1jb2xvcjogIzZjNzU3ZCAjZjFmMWYxO1xyXG4gICAgc2Nyb2xsYmFyLXdpZHRoOiB0aGluO1xyXG59XHJcblxyXG5cclxuLyogY2hyb21lIGFuZCBlZGdlICovXHJcblxyXG46Oi13ZWJraXQtc2Nyb2xsYmFyIHtcclxuICAgIHdpZHRoOiA4cHg7XHJcbn1cclxuXHJcbiA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcclxuICAgIGJhY2tncm91bmQ6ICNmMWYxZjE7XHJcbn1cclxuXHJcbiA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHtcclxuICAgIGJhY2tncm91bmQ6ICM2Yzc1N2Q7XHJcbn1cclxuXHJcbiA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVyIHtcclxuICAgIGJhY2tncm91bmQ6ICM1NTU7XHJcbn1cclxuXHJcbi5zY3JvbGwtZG93biB7XHJcbiAgICBwYWRkaW5nOiAwLjIyNXJlbSAwLjZyZW07XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBib3R0b206IDEuNXJlbTtcclxuICAgIGxlZnQ6IDEuNXJlbTtcclxuICAgIGFuaW1hdGlvbjogZ3JvdyAuMjVzIGxpbmVhcjtcclxufVxyXG5cclxuLnNocmluayB7XHJcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDApO1xyXG4gICAgYW5pbWF0aW9uOiBzaHJpbmsgLjI1cyBsaW5lYXI7XHJcbn1cclxuXHJcbi5zY3JvbGwtZG93bjpub3QoOmhvdmVyKSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIGdyb3cge1xyXG4gICAgZnJvbSB7XHJcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwKTtcclxuICAgIH1cclxuICAgIHRvIHtcclxuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEpO1xyXG4gICAgfVxyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIHNocmluayB7XHJcbiAgICBmcm9tIHtcclxuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEpO1xyXG4gICAgfVxyXG4gICAgdG8ge1xyXG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMCk7XHJcbiAgICB9XHJcbn0iXX0= */\"]\n});","map":{"version":3,"sources":["D:/projects/chat/src/app/chatbox/chatbox.component.ts"],"names":["Message","i0","i1","i2","i3","i4","_c0","ChatboxComponent_app_chatmessage_4_Template","rf","ctx","_r6","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","ChatboxComponent_app_chatmessage_4_Template_app_chatmessage_replyClick_0_listener","$event","ɵɵrestoreView","ctx_r5","ɵɵnextContext","onReplyClick","ɵɵelementEnd","message_r4","$implicit","ɵɵproperty","ChatboxComponent_app_alert_6_Template","_r10","ChatboxComponent_app_alert_6_Template_app_alert_close_0_listener","restoredCtx","i_r8","index","ctx_r9","onAlertClose","ɵɵtext","alert_r7","type","ɵɵadvance","ɵɵtextInterpolate","content","_c1","a0","shrink","ChatboxComponent_button_7_Template","_r12","ChatboxComponent_button_7_Template_button_click_0_listener","ctx_r11","scrollDown","ɵɵelement","ctx_r3","ɵɵpureFunction1","shrinkScrollDownButton","ChatboxComponent","constructor","allowSendingMessages","showScrollDownButton","messageSent","messageContentInput","nameInputContent","messages","alerts","ngOnInit","ngAfterViewChecked","adjustScroll","onSendMessage","trim","username","addAlert","today","Date","hours","getHours","minutes","getMinutes","time","push","onMessageContentInputChange","event","target","value","onInputKeyDown","key","repeat","messagesContainer","messagesContainerRef","nativeElement","scrollTop","clientHeight","scrollHeight","scrollTo","top","behavior","checkScrollDownButton","result","console","log","setTimeout","alert","splice","indexOf","ɵfac","ChatboxComponent_Factory","t","ɵcmp","ɵɵdefineComponent","selectors","viewQuery","ChatboxComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","decls","vars","consts","template","ChatboxComponent_Template","ChatboxComponent_Template_div_scroll_2_listener","ɵɵtemplate","ChatboxComponent_Template_input_keydown_10_listener","ChatboxComponent_Template_input_input_10_listener","ChatboxComponent_Template_button_click_11_listener","ChatboxComponent_Template_input_ngModelChange_13_listener","directives","NgForOf","NgIf","DefaultValueAccessor","NgControlStatus","NgModel","ChatmessageComponent","AlertComponent","NgClass","styles"],"mappings":"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","sourcesContent":["import { Message } from './chatmessage/message.model';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/common\";\r\nimport * as i2 from \"@angular/forms\";\r\nimport * as i3 from \"./chatmessage/chatmessage.component\";\r\nimport * as i4 from \"./alert/alert.component\";\r\nconst _c0 = [\"messagesContainer\"];\r\nfunction ChatboxComponent_app_chatmessage_4_Template(rf, ctx) { if (rf & 1) {\r\n    const _r6 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"app-chatmessage\", 14);\r\n    i0.ɵɵlistener(\"replyClick\", function ChatboxComponent_app_chatmessage_4_Template_app_chatmessage_replyClick_0_listener($event) { i0.ɵɵrestoreView(_r6); const ctx_r5 = i0.ɵɵnextContext(); return ctx_r5.onReplyClick($event); });\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const message_r4 = ctx.$implicit;\r\n    i0.ɵɵproperty(\"message\", message_r4);\r\n} }\r\nfunction ChatboxComponent_app_alert_6_Template(rf, ctx) { if (rf & 1) {\r\n    const _r10 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"app-alert\", 15);\r\n    i0.ɵɵlistener(\"close\", function ChatboxComponent_app_alert_6_Template_app_alert_close_0_listener() { const restoredCtx = i0.ɵɵrestoreView(_r10); const i_r8 = restoredCtx.index; const ctx_r9 = i0.ɵɵnextContext(); return ctx_r9.onAlertClose(i_r8); });\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const alert_r7 = ctx.$implicit;\r\n    i0.ɵɵproperty(\"type\", alert_r7.type);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate(alert_r7.content);\r\n} }\r\nconst _c1 = function (a0) { return { shrink: a0 }; };\r\nfunction ChatboxComponent_button_7_Template(rf, ctx) { if (rf & 1) {\r\n    const _r12 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"button\", 16);\r\n    i0.ɵɵlistener(\"click\", function ChatboxComponent_button_7_Template_button_click_0_listener() { i0.ɵɵrestoreView(_r12); const ctx_r11 = i0.ɵɵnextContext(); return ctx_r11.scrollDown(); });\r\n    i0.ɵɵelement(1, \"i\", 17);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r3 = i0.ɵɵnextContext();\r\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(1, _c1, ctx_r3.shrinkScrollDownButton));\r\n} }\r\nexport class ChatboxComponent {\r\n    constructor() {\r\n        this.allowSendingMessages = false;\r\n        this.showScrollDownButton = false;\r\n        this.shrinkScrollDownButton = false;\r\n        this.messageSent = false;\r\n        this.messageContentInput = \"\";\r\n        this.nameInputContent = \"\";\r\n        this.messages = [];\r\n        this.alerts = [];\r\n    }\r\n    ngOnInit() {\r\n    }\r\n    ngAfterViewChecked() {\r\n        if (this.messageSent) {\r\n            this.adjustScroll();\r\n            this.messageSent = false;\r\n        }\r\n    }\r\n    async onSendMessage() {\r\n        // making sure the message data is valid\r\n        const content = this.messageContentInput.trim();\r\n        const username = this.nameInputContent.trim();\r\n        if (content === \"\") {\r\n            this.addAlert(\"error\", \"You can not send an empty message.\");\r\n            return;\r\n        }\r\n        if (username === \"\") {\r\n            this.addAlert(\"error\", \"You dont have a name.\");\r\n            return;\r\n        }\r\n        //calculating the date string\r\n        const today = new Date();\r\n        const hours = today.getHours();\r\n        const minutes = today.getMinutes();\r\n        const time = (hours > 12 ? hours - 12 : hours) + \":\" + (minutes < 10 ? \"0\" + minutes : minutes) + (hours > 11 ? \" PM\" : \" AM\");\r\n        //adding the message to the list\r\n        this.messages.push(new Message(username, content, time));\r\n        //reseting the input\r\n        this.messageContentInput = \"\";\r\n        this.allowSendingMessages = false;\r\n        this.messageSent = true;\r\n    }\r\n    onMessageContentInputChange(event) {\r\n        this.messageContentInput = event.target.value;\r\n        if (this.messageContentInput.trim() === \"\") {\r\n            this.allowSendingMessages = false;\r\n        }\r\n        else {\r\n            this.allowSendingMessages = true;\r\n        }\r\n    }\r\n    onInputKeyDown(event) {\r\n        if (event.key === \"Enter\" && !event.repeat) {\r\n            this.onSendMessage();\r\n        }\r\n    }\r\n    adjustScroll() {\r\n        const messagesContainer = this.messagesContainerRef.nativeElement;\r\n        if (messagesContainer.scrollTop + messagesContainer.clientHeight >= messagesContainer.scrollHeight - 250) {\r\n            messagesContainer.scrollTop = messagesContainer.scrollHeight;\r\n        }\r\n    }\r\n    scrollDown() {\r\n        this.messagesContainerRef.nativeElement.scrollTo({\r\n            top: this.messagesContainerRef.nativeElement.scrollHeight,\r\n            behavior: \"smooth\"\r\n        });\r\n    }\r\n    checkScrollDownButton() {\r\n        const messagesContainer = this.messagesContainerRef.nativeElement;\r\n        const result = messagesContainer.scrollTop + messagesContainer.clientHeight < messagesContainer.scrollHeight - 250;\r\n        console.log(result);\r\n        if (result) {\r\n            this.showScrollDownButton = true;\r\n            this.shrinkScrollDownButton = false;\r\n        }\r\n        else if (!this.shrinkScrollDownButton && this.showScrollDownButton !== result) {\r\n            this.shrinkScrollDownButton = true;\r\n            setTimeout(() => {\r\n                this.showScrollDownButton = messagesContainer.scrollTop + messagesContainer.clientHeight < messagesContainer.scrollHeight - 250;\r\n                this.shrinkScrollDownButton = false;\r\n            }, 3000);\r\n        }\r\n    }\r\n    onReplyClick(event) {\r\n        this.messageContentInput = `@${event.username} `;\r\n    }\r\n    addAlert(type, content, time = 5000) {\r\n        const alert = this.alerts[this.alerts.push({\r\n            type: type,\r\n            content: content\r\n        })];\r\n        setTimeout(() => {\r\n            this.alerts.splice(this.alerts.indexOf(alert), 1);\r\n        }, time);\r\n    }\r\n    onAlertClose(index) {\r\n        this.alerts.splice(index, 1);\r\n    }\r\n}\r\nChatboxComponent.ɵfac = function ChatboxComponent_Factory(t) { return new (t || ChatboxComponent)(); };\r\nChatboxComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: ChatboxComponent, selectors: [[\"app-chatbox\"]], viewQuery: function ChatboxComponent_Query(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵviewQuery(_c0, 7);\r\n    } if (rf & 2) {\r\n        let _t;\r\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.messagesContainerRef = _t.first);\r\n    } }, decls: 14, vars: 6, consts: [[1, \"container\", \"h-100\", \"d-flex\", \"flex-column\"], [1, \"row\", \"position-relative\", \"flex-grow-1\", \"flex-basis-0\"], [1, \"col-xs-12\", \"h-100\", \"overflow-y-auto\", \"scroller\", 3, \"scroll\"], [\"messagesContainer\", \"\"], [3, \"message\", \"replyClick\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-xs-12\", \"position-absolute\", \"bottom-0\", \"w-100\", \"d-flex\", \"flex-column\", \"align-items-center\"], [3, \"type\", \"close\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"scroll-down btn btn-outline-secondary w-auto rounded-circle border-3\", 3, \"ngClass\", \"click\", 4, \"ngIf\"], [1, \"row\", \"mb-3\"], [1, \"input-group\", \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"Type a message...\", \"aria-label\", \"Type a message...\", \"aria-describedby\", \"button-addon2\", 1, \"form-control\", 3, \"value\", \"keydown\", \"input\"], [\"type\", \"button\", \"id\", \"button-addon2\", 1, \"btn\", \"btn-outline-secondary\", \"px-1\", \"py-0\", 3, \"disabled\", \"click\"], [1, \"bi-arrow-right-circle-fill\", \"fs-4\"], [\"type\", \"text\", \"placeholder\", \"Write your name...\", \"aria-label\", \"Write your name...\", \"aria-describedby\", \"button-addon2\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"message\", \"replyClick\"], [3, \"type\", \"close\"], [1, \"scroll-down\", \"btn\", \"btn-outline-secondary\", \"w-auto\", \"rounded-circle\", \"border-3\", 3, \"ngClass\", \"click\"], [1, \"bi-chevron-double-down\", \"fs-5\"]], template: function ChatboxComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"div\", 1);\r\n        i0.ɵɵelementStart(2, \"div\", 2, 3);\r\n        i0.ɵɵlistener(\"scroll\", function ChatboxComponent_Template_div_scroll_2_listener() { return ctx.checkScrollDownButton(); });\r\n        i0.ɵɵtemplate(4, ChatboxComponent_app_chatmessage_4_Template, 1, 1, \"app-chatmessage\", 4);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(5, \"div\", 5);\r\n        i0.ɵɵtemplate(6, ChatboxComponent_app_alert_6_Template, 2, 2, \"app-alert\", 6);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(7, ChatboxComponent_button_7_Template, 2, 3, \"button\", 7);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(8, \"div\", 8);\r\n        i0.ɵɵelementStart(9, \"div\", 9);\r\n        i0.ɵɵelementStart(10, \"input\", 10);\r\n        i0.ɵɵlistener(\"keydown\", function ChatboxComponent_Template_input_keydown_10_listener($event) { return ctx.onInputKeyDown($event); })(\"input\", function ChatboxComponent_Template_input_input_10_listener($event) { return ctx.onMessageContentInputChange($event); });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(11, \"button\", 11);\r\n        i0.ɵɵlistener(\"click\", function ChatboxComponent_Template_button_click_11_listener() { return ctx.onSendMessage(); });\r\n        i0.ɵɵelement(12, \"i\", 12);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(13, \"input\", 13);\r\n        i0.ɵɵlistener(\"ngModelChange\", function ChatboxComponent_Template_input_ngModelChange_13_listener($event) { return ctx.nameInputContent = $event; });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(4);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.messages);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.alerts);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.showScrollDownButton);\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"value\", ctx.messageContentInput);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"disabled\", !ctx.allowSendingMessages);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngModel\", ctx.nameInputContent);\r\n    } }, directives: [i1.NgForOf, i1.NgIf, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i3.ChatmessageComponent, i4.AlertComponent, i1.NgClass], styles: [\"button[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus {\\r\\n    box-shadow: none;\\r\\n}\\r\\n\\r\\n.overflow-y-auto[_ngcontent-%COMP%] {\\r\\n    overflow-y: auto;\\r\\n}\\r\\n\\r\\n.flex-basis-0[_ngcontent-%COMP%] {\\r\\n    flex-basis: 0;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n.scroller[_ngcontent-%COMP%] {\\r\\n    scrollbar-color: #6c757d #f1f1f1;\\r\\n    scrollbar-width: thin;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n[_ngcontent-%COMP%]::-webkit-scrollbar {\\r\\n    width: 8px;\\r\\n}\\r\\n\\r\\n[_ngcontent-%COMP%]::-webkit-scrollbar-track {\\r\\n    background: #f1f1f1;\\r\\n}\\r\\n\\r\\n[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\\r\\n    background: #6c757d;\\r\\n}\\r\\n\\r\\n[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\\r\\n    background: #555;\\r\\n}\\r\\n\\r\\n.scroll-down[_ngcontent-%COMP%] {\\r\\n    padding: 0.225rem 0.6rem;\\r\\n    position: absolute;\\r\\n    bottom: 1.5rem;\\r\\n    left: 1.5rem;\\r\\n    animation: grow .25s linear;\\r\\n}\\r\\n\\r\\n.shrink[_ngcontent-%COMP%] {\\r\\n    transform: scale(0);\\r\\n    animation: shrink .25s linear;\\r\\n}\\r\\n\\r\\n.scroll-down[_ngcontent-%COMP%]:not(:hover) {\\r\\n    background-color: #fff;\\r\\n}\\r\\n\\r\\n@keyframes grow {\\r\\n    from {\\r\\n        transform: scale(0);\\r\\n    }\\r\\n    to {\\r\\n        transform: scale(1);\\r\\n    }\\r\\n}\\r\\n\\r\\n@keyframes shrink {\\r\\n    from {\\r\\n        transform: scale(1);\\r\\n    }\\r\\n    to {\\r\\n        transform: scale(0);\\r\\n    }\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXRib3guY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7SUFFSSxnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSxnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSxhQUFhO0FBQ2pCOztBQUdBLFlBQVk7O0FBRVo7SUFDSSxnQ0FBZ0M7SUFDaEMscUJBQXFCO0FBQ3pCOztBQUdBLG9CQUFvQjs7QUFFcEI7SUFDSSxVQUFVO0FBQ2Q7O0FBRUM7SUFDRyxtQkFBbUI7QUFDdkI7O0FBRUM7SUFDRyxtQkFBbUI7QUFDdkI7O0FBRUM7SUFDRyxnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSx3QkFBd0I7SUFDeEIsa0JBQWtCO0lBQ2xCLGNBQWM7SUFDZCxZQUFZO0lBQ1osMkJBQTJCO0FBQy9COztBQUVBO0lBQ0ksbUJBQW1CO0lBQ25CLDZCQUE2QjtBQUNqQzs7QUFFQTtJQUNJLHNCQUFzQjtBQUMxQjs7QUFFQTtJQUNJO1FBQ0ksbUJBQW1CO0lBQ3ZCO0lBQ0E7UUFDSSxtQkFBbUI7SUFDdkI7QUFDSjs7QUFFQTtJQUNJO1FBQ0ksbUJBQW1CO0lBQ3ZCO0lBQ0E7UUFDSSxtQkFBbUI7SUFDdkI7QUFDSiIsImZpbGUiOiJjaGF0Ym94LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJidXR0b246Zm9jdXMsXHJcbmlucHV0OmZvY3VzIHtcclxuICAgIGJveC1zaGFkb3c6IG5vbmU7XHJcbn1cclxuXHJcbi5vdmVyZmxvdy15LWF1dG8ge1xyXG4gICAgb3ZlcmZsb3cteTogYXV0bztcclxufVxyXG5cclxuLmZsZXgtYmFzaXMtMCB7XHJcbiAgICBmbGV4LWJhc2lzOiAwO1xyXG59XHJcblxyXG5cclxuLyogRmlyZWZveCAqL1xyXG5cclxuLnNjcm9sbGVyIHtcclxuICAgIHNjcm9sbGJhci1jb2xvcjogIzZjNzU3ZCAjZjFmMWYxO1xyXG4gICAgc2Nyb2xsYmFyLXdpZHRoOiB0aGluO1xyXG59XHJcblxyXG5cclxuLyogY2hyb21lIGFuZCBlZGdlICovXHJcblxyXG46Oi13ZWJraXQtc2Nyb2xsYmFyIHtcclxuICAgIHdpZHRoOiA4cHg7XHJcbn1cclxuXHJcbiA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcclxuICAgIGJhY2tncm91bmQ6ICNmMWYxZjE7XHJcbn1cclxuXHJcbiA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHtcclxuICAgIGJhY2tncm91bmQ6ICM2Yzc1N2Q7XHJcbn1cclxuXHJcbiA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVyIHtcclxuICAgIGJhY2tncm91bmQ6ICM1NTU7XHJcbn1cclxuXHJcbi5zY3JvbGwtZG93biB7XHJcbiAgICBwYWRkaW5nOiAwLjIyNXJlbSAwLjZyZW07XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBib3R0b206IDEuNXJlbTtcclxuICAgIGxlZnQ6IDEuNXJlbTtcclxuICAgIGFuaW1hdGlvbjogZ3JvdyAuMjVzIGxpbmVhcjtcclxufVxyXG5cclxuLnNocmluayB7XHJcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDApO1xyXG4gICAgYW5pbWF0aW9uOiBzaHJpbmsgLjI1cyBsaW5lYXI7XHJcbn1cclxuXHJcbi5zY3JvbGwtZG93bjpub3QoOmhvdmVyKSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIGdyb3cge1xyXG4gICAgZnJvbSB7XHJcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwKTtcclxuICAgIH1cclxuICAgIHRvIHtcclxuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEpO1xyXG4gICAgfVxyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIHNocmluayB7XHJcbiAgICBmcm9tIHtcclxuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEpO1xyXG4gICAgfVxyXG4gICAgdG8ge1xyXG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMCk7XHJcbiAgICB9XHJcbn0iXX0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}